{% extends "base.html" %}
{% load staticfiles %}
{% load i18n %}
{% load gbtags %}

{% block head_script %}
    {{ block.super }}
    <!-- site_base.html: head_script -->

    <script type="text/javascript"
            src="{% static 'js/HeadFinal.js' %}"></script>

{% endblock %}

{% block page_style %}
    {{ block.super }}
    <!-- site_base.html: page_style -->

    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
          crossorigin="anonymous">

{% endblock %}

{% block style_base %}
    {{ block.super }}
    <!-- site_base.html: style_base -->

    {% comment %}
    {% block google_fonts %}
        <link
        href='http://fonts.googleapis.com/css?family=BenchNine:300,400,700|Roboto+Slab:400,100,300,700'
        rel='stylesheet' type='text/css'>
    {% endblock google_fonts %}
    {% endcomment %}

    {% block typekit %}
        <script type="text/javascript" src="//use.typekit.net/den5ddu.js"></script>
        <script type="text/javascript">try {
          Typekit.load();
        } catch (e) {
        }</script>
    {% endblock typekit %}

    <link rel="stylesheet"
          href="{% static 'css/mint-choc/jquery-ui-1.10.3.custom.min.css' %}">
    <link rel="stylesheet"
          href="{% static 'css/font-awesome.css' %}">
    <link rel="stylesheet"
          href="{% static 'css/style_base.css' %}">

    {% block extra_style %}{% endblock %}
{% endblock %}

{% block head_title %}
    {% trans "TennisBlock" %} - {% block title %}{% endblock %}
{% endblock %}

{% block body_class %}
    {% if user.is_authenticated %}
        authenticated
    {% else %}
        guest
    {% endif %}
{% endblock %}

{% block content %}
    {% if user.is_authenticated %}
        {% include "common/navbar.html" %}

        <main class="page-container h-100">
            <div class="row h-100 mr-0">
                <div class="col-2 pr-0">
                    {% include "common/sidebar.html" %}
                </div>
                <div class="col pr-0">
                    <div class="container-fluid mt-3">
                        {% block page_content %}{% endblock %}
                    </div>
                </div>
            </div>
        </main>

    {% else %}
        {% block home_content %}{% endblock %}
    {% endif %}
{% endblock %}

{% block body_script %}
    {{ block.super }}
    <!-- site_base.html: body_script -->

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
            integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
            integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.min.js"></script>
    <script type="text/javascript"
            src="{% static 'js/library/amplify.core.min.js' %}"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>

    <script type="text/javascript" src="{% static 'js/Client.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/tennislib/TennisEnvironment.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/tennislib/tennisconstants.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/tennislib/TennisGui.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/tennislib/TennisUtils.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/tennislib/TennisMain.js' %}"></script>
{% endblock %}

{% block extra_script %}
    <!-- site_base.html: extra_script -->


    {% block angular_script %}
        <!-- Use angular_base.html to get angular setup -->
    {% endblock %}

    {% block tennisblock_script %}
        <!-- site_base.html: tennisblock_script -->
        <script type="text/javascript">
          GBBasePath = "/static/js/";
          GBStaticPath = "/static";
          AngularPartialsBase = '/static/partials';
        </script>

        <script type="text/javascript">
          django = {
            'username': "{{ user.username }}",
            'first': "{{ user.first_name }}",
            'last': "{{ user.last_name }}",
            'blockcaptain': "{{ perms.blockdb.change_sched }}"
          };

          console.log("Initialized username to " + django.username);
        </script>

    {% endblock %}


    {% if not debug %}
        <script>
          (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
              (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
              m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
          })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

          ga('create', 'UA-35101738-1', 'gardenbuzz.com');
          ga('send', 'pageview');

        </script>
    {% endif %}

{% endblock %}
