{% extends "common/base.html" %}
{% load sekizai_tags %}

{% block mytags %}
    {{ block.super }}
    {% if not isprod %}
        {% add_data "less-data" "schedule.less" %}
    {% else %}
        {% add_data "css-data" "schedule.css" %}
    {% endif %}

    {% add_data "js-body" "angular/apps/tennisblock.js" %}
    {% add_data "js-body" "angular/controllers/blockschedule.js" %}
{% endblock %}

{% block title %}
    schedule
{% endblock %}
{% block content %}
    <div id="container" class="home dynamic">
        <div id="content" class="dynamic" ng-controller="BlockSchedule">

            {% verbatim %}
            <div id="textContent" >
                <div id="blockheading" class="dynamic">
                    <h2>Block Schedule for {{ block.currdate }}</h2>
                    <button ng-click="pickTeams()">Pick Teams</button>
                    <button ng-click="schedulePlayersConfirm()">Schedule</button>
                    <button ng-click="updateSchedule">Update Schedule</button>
                    <a target="_blank" href="/api/blocksheet/">Download Block Sheet</a>
                    <div id=schedule>
                        <div class="navigation">
                            <a ng-hide='true' class="previous"
                               ng-click="previous()">
                                &lt; previous
                            </a>
                            <button ng-repeat="date in block.dates | filter: { holdout : false }"
                                    ng-click="gotodate(date.date)">
                                {{ date.date }}
                            </button>
                            <a class="next"
                               ng-hide="1"
                               ng-click="next()">
                                next &gt;
                            </a>
                        </div>
                        <div class="scheduleview">
                            <h3>Players</h3>
                            <table>
                                <tr>
                                    <th>Guy</th>
                                    <th>Gal</th>
                                </tr>
                                <tr ng-repeat="couple in players.couples">
                                    <td>{{ couple[0].name }}</td>
                                    <td>{{ couple[1].name }}</td>
                                </tr>
                            </table>
                            <h3>Subs</h3>
                            <ul>
                                <span>Guys</span>
                                <li ng-repeat="sub in subs.guys">
                                    {{ sub.name}}
                                </li>
                                <span>Gals</span>
                                <li ng-repeat="sub in subs.gals">
                                    {{ sub.name}}
                                </li>
                            </ul>
                            <h3>Play Schedule</h3>
                            <ul>
                                <li ng-repeat="set in match">
                                    {{ set.name }}
                                    <ul>
                                        <li ng-repeat="court in set.courts">
                                            <div class="courtAssignment">
                                                <h4>{{ court.number }}</h4>
                                                <div class="courtTeam">
                                                    {{ court.ta.guy.name }} and {{ court.ta.gal.name }}
                                                </div>
                                                <span>Versus</span>
                                                <div class="courtTeam">
                                                    {{ court.tb.guy.name }} and {{ court.tb.gal.name }}
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            {% endverbatim %}
            <div id="dialog_confirm"></div>

        </div>
    </div>


{% endblock %}
